(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();class e{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t,this.cards=[{type:"American Express",number:"371449635398431"},{type:"Diners Club",number:"30569309025904"},{type:"Discover",number:"6011111111111117"},{type:"Мир",number:"2200123456789001"},{type:"MasterCard",number:"5555555555554444"},{type:"Visa",number:"4111111111111111"}]}bindToDOM(){this.container.innerHTML=this.markup}get markup(){return`\n      <div class='table-examples'>\n        <h3>Example credit card numbers</h3>\n        <table class="table table-bordered">\n          <thead>\n            <tr>\n              <th>Credit Card Type</th>\n              <th>Credit Card Number</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${this.cards.map((t=>`\n              <tr>\n                <td>${t.type}</td>\n                <td>${t.number}</td>\n              </tr>\n            `)).join("")}\n          </tbody>\n        </table>\n      </div>\n    `}}const n=t.p+"img/visa_electron_curved.png",r=t.p+"img/mastercard_curved.png",i=t.p+"img/credit_card_amex.png",s=t.p+"img/discover_straight_32px.png",a=t.p+"img/mir_card.png",c=t.p+"img/diners_club_card.png";class o{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t,this.cards=[{class:"visa",title:"Visa",url:n},{class:"master",title:"Mastercard",url:r},{class:"amex",title:"American Express",url:i},{class:"discover",title:"Discover",url:s},{class:"mir",title:"Mir",url:a},{class:"diners_club",title:"Diners Club",url:c}]}bindToDOM(){this.container.innerHTML=this.markup}get markup(){return`\n      <div class="cards">\n        ${this.cards.map((t=>`\n        <div>\n          <img class="card ${t.class}" src=${t.url} alt="${t.title}">\n        </div>  \n        `)).join("")}\n      </div>\n    `}}class l{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t,this.onSubmit=this.onSubmit.bind(this),this.onInputChange=this.onInputChange.bind(this)}bindToDOM(){this.container.innerHTML=l.markup;const{selector:t,messageSelector:e,submitSelector:n,inputSelector:r}=l;this.element=this.container.querySelector(t),this.message=this.element.querySelector(e),this.submit=this.element.querySelector(n),this.input=this.element.querySelector(r),this.element.addEventListener("submit",this.onSubmit),this.input.addEventListener("input",this.onInputChange)}onSubmit(t){t.preventDefault();const e=function(t){const e=`${t}`;let n=0,r=!1;for(let t=e.length-1;t>=0;t-=1){let i=parseInt(e.charAt(t),10);r&&(i*=2)>9&&(i-=9),n+=i,r=!r}return n%10==0}(this.input.value);if(this.input.classList.toggle("valid",e),this.input.classList.toggle("invalid",!e),e){const t=function(t){let e="no-found";const n=String(t);return/^4[0-9]{12}(?:[0-9]{3})?$/.test(n)&&(e="visa"),/^(5[1-5]|222[1-9]|22[3-9]|2[3-6]|27[01]|2720)[0-9]{0,}$/.test(n)&&(e="master"),/^220(0|4)[0-9]{12}$/.test(n)&&(e="mir"),/^65[4-9][0-9]{13}|64[4-9][0-9]{13}|6011[0-9]{12}|(622(?:12[6-9]|1[3-9][0-9]|[2-8][0-9][0-9]|9[01][0-9]|92[0-5])[0-9]{10})$/.test(n)&&(e="discover"),/^3[47][0-9]{13}$/.test(n)&&(e="amex"),/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/.test(n)&&(e="diners_club"),e}(this.input.value),e=document.querySelector(`.${t}`);e?e.classList.add("card-active"):this.showMessage()}}onInputChange(){this.input.classList.remove("invalid","valid");const t=document.querySelector(".card-active");t&&t.classList.remove("card-active"),this.hideMessage()}showMessage(){this.message.classList.remove("hidden")}hideMessage(){this.message.classList.add("hidden")}static get markup(){return'\n      <form id="form" class="form">\n          <div class="form-group">\n              <input class="form-control" id="card_number" name="card_number" type="text" placeholder="Credit card number" data-original-title="" title="">\n          </div>\n          <div class=\'button-wrapper\'>\n            <button class="submit">Click to Validate</button>\n          </div> \n          <span class="message hidden">Упсс! Платежной системы нет в базе</span>\n      </form>\n    '}static get selector(){return".form"}static get messageSelector(){return".message"}static get submitSelector(){return".submit"}static get inputSelector(){return".form-control"}}class d{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t}bindToDOM(){this.container.innerHTML=d.markup,this.element=this.container.querySelector(d.selector),this.formContainer=this.element.querySelector(d.formSelector),this.cardsContainer=this.element.querySelector(d.cardsSelector);new l(this.formContainer).bindToDOM();new o(this.cardsContainer).bindToDOM()}static get formSelector(){return".form-container"}static get cardsSelector(){return".cards-container"}static get selector(){return".widget"}static get markup(){return"\n      <div class='widget'>\n        <h3>Check your credit card number</h3>\n        <div class='form-container'></div>\n        <div class='cards-container'></div>\n      </div>\n    "}}class u{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t}bindToDOM(){this.container.innerHTML=u.markUp,this.widgetContainer=this.container.querySelector(u.widgetSelector),this.tableContainer=this.container.querySelector(u.tableSelector);new d(this.widgetContainer).bindToDOM();new e(this.tableContainer).bindToDOM()}static get markUp(){return'\n      <div class="headmast">\n        <h2>Validate Credit Card Numbers</h2>\n        <h3>Check a credit card number with our online checker!</h3>\n        <div class="widget-container"></div>\n        <div class="table-container"></div>\n      </div>\n    '}static get widgetSelector(){return".widget-container"}static get tableSelector(){return".table-container"}}console.log("it works!");const m=document.querySelector("#card-validator-container");new u(m).bindToDOM()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RVdsQixvQkFDVCxNQUFRLDJMQU9WLEVDM0NhLE1BQU15RCxFQUNuQmpFLFlBQVlDLEdBQ1YsS0FBTUEsYUFBcUJDLGFBQ3pCLE1BQU0sSUFBSU4sTUFBTSxnQ0FHbEJiLEtBQUtrQixVQUFZQSxDQUNuQixDQUVBSyxZQUNFdkIsS0FBS2tCLFVBQVVNLFVBQVkwRCxFQUFVQyxPQUNyQ25GLEtBQUtvRixnQkFBa0JwRixLQUFLa0IsVUFBVThCLGNBQWNrQyxFQUFVRyxnQkFDOURyRixLQUFLc0YsZUFBaUJ0RixLQUFLa0IsVUFBVThCLGNBQWNrQyxFQUFVSyxlQUU5QyxJQUFJVixFQUFPN0UsS0FBS29GLGlCQUN4QjdELFlBRU8sSUFBSWlFLEVBQW1CeEYsS0FBS3NGLGdCQUNwQy9ELFdBQ1IsQ0FFVzRELG9CQUNULE1BQVEsb1FBUVYsQ0FFV0UsNEJBQ1QsTUFBTyxtQkFDVCxDQUVXRSwyQkFDVCxNQUFPLGtCQUNULEVDdkNGRSxRQUFRQyxJQUFJLGFBRVosTUFBTXhFLEVBQVlYLFNBQVN5QyxjQUFjLDZCQUN2QixJQUFJa0MsRUFBVWhFLEdBQ3RCSyxXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWhqLWhvbWV3b3Jrcy10ZXN0aW5nL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2Foai1ob21ld29ya3MtdGVzdGluZy93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2Foai1ob21ld29ya3MtdGVzdGluZy93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9haGotaG9tZXdvcmtzLXRlc3RpbmcvLi9zcmMvanMvY29tcG9uZW50cy9jYXJkcy1leGFtcGxlcy10YWJsZS9DYXJkc0V4YW1wbGVzVGFibGUuanMiLCJ3ZWJwYWNrOi8vYWhqLWhvbWV3b3Jrcy10ZXN0aW5nLy4vc3JjL2pzL2NvbXBvbmVudHMvY2FyZC1saXN0L0NhcmRzTGlzdC5qcyIsIndlYnBhY2s6Ly9haGotaG9tZXdvcmtzLXRlc3RpbmcvLi9zcmMvanMvY29tcG9uZW50cy9jaGVjay1mb3JtL0NoZWNrRm9ybS5qcyIsIndlYnBhY2s6Ly9haGotaG9tZXdvcmtzLXRlc3RpbmcvLi9zcmMvanMvdmFsaWRhdGlvbi9pc1ZhbGlkLmpzIiwid2VicGFjazovL2Foai1ob21ld29ya3MtdGVzdGluZy8uL3NyYy9qcy92YWxpZGF0aW9uL2ZpbmRQYXltZW50U3lzdGVtLmpzIiwid2VicGFjazovL2Foai1ob21ld29ya3MtdGVzdGluZy8uL3NyYy9qcy9jb21wb25lbnRzL3dpZGdldC9XaWRnZXQuanMiLCJ3ZWJwYWNrOi8vYWhqLWhvbWV3b3Jrcy10ZXN0aW5nLy4vc3JjL2pzL2NvbXBvbmVudHMvdmFsaWRhdG9yL1ZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9haGotaG9tZXdvcmtzLXRlc3RpbmcvLi9zcmMvanMvYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImltcG9ydCAnLi9jYXJkcy1leGFtcGxlcy10YWJsZS5jc3MnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkRXhhbXBsZXNUYWJsZSB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xuICAgIGlmICghKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb250YWluZXIgaXMgbm90IEhUTUxFbGVtZW50Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgdGhpcy5jYXJkcyA9IFtcbiAgICAgIHsgdHlwZTogJ0FtZXJpY2FuIEV4cHJlc3MnLCBudW1iZXI6ICczNzE0NDk2MzUzOTg0MzEnIH0sXG4gICAgICB7IHR5cGU6ICdEaW5lcnMgQ2x1YicsIG51bWJlcjogJzMwNTY5MzA5MDI1OTA0JyB9LFxuICAgICAgeyB0eXBlOiAnRGlzY292ZXInLCBudW1iZXI6ICc2MDExMTExMTExMTExMTE3JyB9LFxuICAgICAgeyB0eXBlOiAn0JzQuNGAJywgbnVtYmVyOiAnMjIwMDEyMzQ1Njc4OTAwMScgfSxcbiAgICAgIHsgdHlwZTogJ01hc3RlckNhcmQnLCBudW1iZXI6ICc1NTU1NTU1NTU1NTU0NDQ0JyB9LFxuICAgICAgeyB0eXBlOiAnVmlzYScsIG51bWJlcjogJzQxMTExMTExMTExMTExMTEnIH0sXG4gICAgXTtcbiAgfVxuXG4gIGJpbmRUb0RPTSgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLm1hcmt1cDtcbiAgfVxuXG4gIGdldCBtYXJrdXAoKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgY2xhc3M9J3RhYmxlLWV4YW1wbGVzJz5cbiAgICAgICAgPGgzPkV4YW1wbGUgY3JlZGl0IGNhcmQgbnVtYmVyczwvaDM+XG4gICAgICAgIDx0YWJsZSBjbGFzcz1cInRhYmxlIHRhYmxlLWJvcmRlcmVkXCI+XG4gICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICA8dGg+Q3JlZGl0IENhcmQgVHlwZTwvdGg+XG4gICAgICAgICAgICAgIDx0aD5DcmVkaXQgQ2FyZCBOdW1iZXI8L3RoPlxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICR7dGhpcy5jYXJkc1xuICAgIC5tYXAoXG4gICAgICAoY2FyZCkgPT4gYFxuICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgPHRkPiR7Y2FyZC50eXBlfTwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkPiR7Y2FyZC5udW1iZXJ9PC90ZD5cbiAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgIGAsXG4gICAgKVxuICAgIC5qb2luKCcnKX1cbiAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICA8L3RhYmxlPlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxufVxuIiwiaW1wb3J0IHZpc2FFbGVjdHJvbiBmcm9tICcuLi8uLi8uLi9pbWcvdmlzYV9lbGVjdHJvbl9jdXJ2ZWQucG5nJztcbmltcG9ydCBNYXN0ZXJDYXJkIGZyb20gJy4uLy4uLy4uL2ltZy9tYXN0ZXJjYXJkX2N1cnZlZC5wbmcnO1xuaW1wb3J0IEFtZXhDYXJkIGZyb20gJy4uLy4uLy4uL2ltZy9jcmVkaXRfY2FyZF9hbWV4LnBuZyc7XG5pbXBvcnQgRGlzY292ZXJDYXJkIGZyb20gJy4uLy4uLy4uL2ltZy9kaXNjb3Zlcl9zdHJhaWdodF8zMnB4LnBuZyc7XG5pbXBvcnQgTWlyQ2FyZCBmcm9tICcuLi8uLi8uLi9pbWcvbWlyX2NhcmQucG5nJztcbmltcG9ydCBEaW5lcnNDbHViQ2FyZCBmcm9tICcuLi8uLi8uLi9pbWcvZGluZXJzX2NsdWJfY2FyZC5wbmcnO1xuXG5pbXBvcnQgJy4vY2FyZC1saXN0LmNzcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmRzTGlzdCB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xuICAgIGlmICghKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb250YWluZXIgaXMgbm90IEhUTUxFbGVtZW50Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgdGhpcy5jYXJkcyA9IFtcbiAgICAgIHsgY2xhc3M6ICd2aXNhJywgdGl0bGU6ICdWaXNhJywgdXJsOiB2aXNhRWxlY3Ryb24gfSxcbiAgICAgIHsgY2xhc3M6ICdtYXN0ZXInLCB0aXRsZTogJ01hc3RlcmNhcmQnLCB1cmw6IE1hc3RlckNhcmQgfSxcbiAgICAgIHsgY2xhc3M6ICdhbWV4JywgdGl0bGU6ICdBbWVyaWNhbiBFeHByZXNzJywgdXJsOiBBbWV4Q2FyZCB9LFxuICAgICAgeyBjbGFzczogJ2Rpc2NvdmVyJywgdGl0bGU6ICdEaXNjb3ZlcicsIHVybDogRGlzY292ZXJDYXJkIH0sXG4gICAgICB7IGNsYXNzOiAnbWlyJywgdGl0bGU6ICdNaXInLCB1cmw6IE1pckNhcmQgfSxcbiAgICAgIHsgY2xhc3M6ICdkaW5lcnNfY2x1YicsIHRpdGxlOiAnRGluZXJzIENsdWInLCB1cmw6IERpbmVyc0NsdWJDYXJkIH0sXG4gICAgXTtcbiAgfVxuXG4gIGJpbmRUb0RPTSgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSB0aGlzLm1hcmt1cDtcbiAgfVxuXG4gIGdldCBtYXJrdXAoKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgIDxkaXYgY2xhc3M9XCJjYXJkc1wiPlxuICAgICAgICAke3RoaXMuY2FyZHNcbiAgICAubWFwKFxuICAgICAgKGNhcmQpID0+IGBcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICA8aW1nIGNsYXNzPVwiY2FyZCAke2NhcmQuY2xhc3N9XCIgc3JjPSR7Y2FyZC51cmx9IGFsdD1cIiR7Y2FyZC50aXRsZX1cIj5cbiAgICAgICAgPC9kaXY+ICBcbiAgICAgICAgYCxcbiAgICApXG4gICAgLmpvaW4oJycpfVxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxufVxuIiwiaW1wb3J0IGZpbmRQYXltZW50U3lzdGVtIGZyb20gJy4uLy4uL3ZhbGlkYXRpb24vZmluZFBheW1lbnRTeXN0ZW0nO1xuaW1wb3J0IGlzVmFsaWQgZnJvbSAnLi4vLi4vdmFsaWRhdGlvbi9pc1ZhbGlkJztcbmltcG9ydCAnLi9jaGVjay1mb3JtLmNzcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENoZWNrRm9ybSB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xuICAgIGlmICghKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb250YWluZXIgaXMgbm90IEhUTUxFbGVtZW50Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG5cbiAgICB0aGlzLm9uU3VibWl0ID0gdGhpcy5vblN1Ym1pdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25JbnB1dENoYW5nZSA9IHRoaXMub25JbnB1dENoYW5nZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgYmluZFRvRE9NKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9IENoZWNrRm9ybS5tYXJrdXA7XG5cbiAgICBjb25zdCB7XG4gICAgICBzZWxlY3RvciwgbWVzc2FnZVNlbGVjdG9yLCBzdWJtaXRTZWxlY3RvciwgaW5wdXRTZWxlY3RvcixcbiAgICB9ID0gQ2hlY2tGb3JtO1xuXG4gICAgdGhpcy5lbGVtZW50ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgdGhpcy5tZXNzYWdlID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IobWVzc2FnZVNlbGVjdG9yKTtcbiAgICB0aGlzLnN1Ym1pdCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKHN1Ym1pdFNlbGVjdG9yKTtcbiAgICB0aGlzLmlucHV0ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoaW5wdXRTZWxlY3Rvcik7XG5cbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5vblN1Ym1pdCk7XG4gICAgdGhpcy5pbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMub25JbnB1dENoYW5nZSk7XG4gIH1cblxuICBvblN1Ym1pdChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgaXNWYWxpZENhcmQgPSBpc1ZhbGlkKHRoaXMuaW5wdXQudmFsdWUpO1xuICAgIHRoaXMuaW5wdXQuY2xhc3NMaXN0LnRvZ2dsZSgndmFsaWQnLCBpc1ZhbGlkQ2FyZCk7XG4gICAgdGhpcy5pbnB1dC5jbGFzc0xpc3QudG9nZ2xlKCdpbnZhbGlkJywgIWlzVmFsaWRDYXJkKTtcblxuICAgIGlmIChpc1ZhbGlkQ2FyZCkge1xuICAgICAgY29uc3QgcGF5bWVudFN5c3RlbSA9IGZpbmRQYXltZW50U3lzdGVtKHRoaXMuaW5wdXQudmFsdWUpO1xuICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3BheW1lbnRTeXN0ZW19YCk7XG5cbiAgICAgIGlmIChjYXJkKSB7XG4gICAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnY2FyZC1hY3RpdmUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbklucHV0Q2hhbmdlKCkge1xuICAgIHRoaXMuaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnaW52YWxpZCcsICd2YWxpZCcpO1xuICAgIGNvbnN0IGFjdGl2ZUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1hY3RpdmUnKTtcbiAgICBpZiAoYWN0aXZlQ2FyZCkge1xuICAgICAgYWN0aXZlQ2FyZC5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkLWFjdGl2ZScpO1xuICAgIH1cbiAgICB0aGlzLmhpZGVNZXNzYWdlKCk7XG4gIH1cblxuICBzaG93TWVzc2FnZSgpIHtcbiAgICB0aGlzLm1lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gIH1cblxuICBoaWRlTWVzc2FnZSgpIHtcbiAgICB0aGlzLm1lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gIH1cblxuICBzdGF0aWMgZ2V0IG1hcmt1cCgpIHtcbiAgICByZXR1cm4gYFxuICAgICAgPGZvcm0gaWQ9XCJmb3JtXCIgY2xhc3M9XCJmb3JtXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJjYXJkX251bWJlclwiIG5hbWU9XCJjYXJkX251bWJlclwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJDcmVkaXQgY2FyZCBudW1iZXJcIiBkYXRhLW9yaWdpbmFsLXRpdGxlPVwiXCIgdGl0bGU9XCJcIj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPSdidXR0b24td3JhcHBlcic+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwic3VibWl0XCI+Q2xpY2sgdG8gVmFsaWRhdGU8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj4gXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJtZXNzYWdlIGhpZGRlblwiPtCj0L/RgdGBISDQn9C70LDRgtC10LbQvdC+0Lkg0YHQuNGB0YLQtdC80Ysg0L3QtdGCINCyINCx0LDQt9C1PC9zcGFuPlxuICAgICAgPC9mb3JtPlxuICAgIGA7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHNlbGVjdG9yKCkge1xuICAgIHJldHVybiAnLmZvcm0nO1xuICB9XG5cbiAgc3RhdGljIGdldCBtZXNzYWdlU2VsZWN0b3IoKSB7XG4gICAgcmV0dXJuICcubWVzc2FnZSc7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN1Ym1pdFNlbGVjdG9yKCkge1xuICAgIHJldHVybiAnLnN1Ym1pdCc7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGlucHV0U2VsZWN0b3IoKSB7XG4gICAgcmV0dXJuICcuZm9ybS1jb250cm9sJztcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNWYWxpZCh2YWx1ZSkge1xuICBjb25zdCBudW0gPSBgJHt2YWx1ZX1gO1xuICBsZXQgbkNoZWNrID0gMDtcbiAgbGV0IGJFdmVuID0gZmFsc2U7XG4gIGZvciAobGV0IG4gPSBudW0ubGVuZ3RoIC0gMTsgbiA+PSAwOyBuIC09IDEpIHtcbiAgICBsZXQgbkRpZ2l0ID0gcGFyc2VJbnQobnVtLmNoYXJBdChuKSwgMTApO1xuICAgIC8qIGVzbGludC1kaXNhYmxlICovXG4gICAgaWYgKGJFdmVuICYmIChuRGlnaXQgKj0gMikgPiA5KSB7XG4gICAgICBuRGlnaXQgLT0gOTtcbiAgICB9XG4gICAgbkNoZWNrICs9IG5EaWdpdDtcbiAgICBiRXZlbiA9ICFiRXZlbjtcbiAgfVxuXG4gIHJldHVybiAobkNoZWNrICUgMTApID09PSAwO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZmluZFBheW1lbnRTeXN0ZW0odmFsdWUpIHtcbiAgbGV0IHBheVN5c3RlbSA9ICduby1mb3VuZCc7XG4gIGNvbnN0IGEgPSBTdHJpbmcodmFsdWUpO1xuICBpZiAoL140WzAtOV17MTJ9KD86WzAtOV17M30pPyQvLnRlc3QoYSkpIHtcbiAgICBwYXlTeXN0ZW0gPSAndmlzYSc7XG4gIH1cblxuICBpZiAoL14oNVsxLTVdfDIyMlsxLTldfDIyWzMtOV18MlszLTZdfDI3WzAxXXwyNzIwKVswLTldezAsfSQvLnRlc3QoYSkpIHtcbiAgICBwYXlTeXN0ZW0gPSAnbWFzdGVyJztcbiAgfVxuXG4gIGlmICgvXjIyMCgwfDQpWzAtOV17MTJ9JC8udGVzdChhKSkge1xuICAgIHBheVN5c3RlbSA9ICdtaXInO1xuICB9XG5cbiAgaWYgKC9eNjVbNC05XVswLTldezEzfXw2NFs0LTldWzAtOV17MTN9fDYwMTFbMC05XXsxMn18KDYyMig/OjEyWzYtOV18MVszLTldWzAtOV18WzItOF1bMC05XVswLTldfDlbMDFdWzAtOV18OTJbMC01XSlbMC05XXsxMH0pJC8udGVzdChhKSkge1xuICAgIHBheVN5c3RlbSA9ICdkaXNjb3Zlcic7XG4gIH1cblxuICBpZiAoL14zWzQ3XVswLTldezEzfSQvLnRlc3QoYSkpIHtcbiAgICBwYXlTeXN0ZW0gPSAnYW1leCc7XG4gIH1cblxuICBpZiAoL14zKD86MFswLTVdfFs2OF1bMC05XSlbMC05XXsxMX0kLy50ZXN0KGEpKSB7XG4gICAgcGF5U3lzdGVtID0gJ2RpbmVyc19jbHViJztcbiAgfVxuXG4gIHJldHVybiBwYXlTeXN0ZW07XG59XG4iLCJpbXBvcnQgQ2FyZHNMaXN0IGZyb20gJy4uL2NhcmQtbGlzdC9DYXJkc0xpc3QnO1xuaW1wb3J0IENoZWNrRm9ybSBmcm9tICcuLi9jaGVjay1mb3JtL0NoZWNrRm9ybSc7XG5pbXBvcnQgJy4vd2lkZ2V0LmNzcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdpZGdldCB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xuICAgIGlmICghKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb250YWluZXIgaXMgbm90IEhUTUxFbGVtZW50Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gIH1cblxuICBiaW5kVG9ET00oKSB7XG4gICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gV2lkZ2V0Lm1hcmt1cDtcblxuICAgIHRoaXMuZWxlbWVudCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoV2lkZ2V0LnNlbGVjdG9yKTtcbiAgICB0aGlzLmZvcm1Db250YWluZXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihXaWRnZXQuZm9ybVNlbGVjdG9yKTtcbiAgICB0aGlzLmNhcmRzQ29udGFpbmVyID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoV2lkZ2V0LmNhcmRzU2VsZWN0b3IpO1xuXG4gICAgY29uc3QgZm9ybSA9IG5ldyBDaGVja0Zvcm0odGhpcy5mb3JtQ29udGFpbmVyKTtcbiAgICBmb3JtLmJpbmRUb0RPTSgpO1xuXG4gICAgY29uc3QgY2FyZHMgPSBuZXcgQ2FyZHNMaXN0KHRoaXMuY2FyZHNDb250YWluZXIpO1xuICAgIGNhcmRzLmJpbmRUb0RPTSgpO1xuICB9XG5cbiAgc3RhdGljIGdldCBmb3JtU2VsZWN0b3IoKSB7XG4gICAgcmV0dXJuICcuZm9ybS1jb250YWluZXInO1xuICB9XG5cbiAgc3RhdGljIGdldCBjYXJkc1NlbGVjdG9yKCkge1xuICAgIHJldHVybiAnLmNhcmRzLWNvbnRhaW5lcic7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHNlbGVjdG9yKCkge1xuICAgIHJldHVybiAnLndpZGdldCc7XG4gIH1cblxuICBzdGF0aWMgZ2V0IG1hcmt1cCgpIHtcbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz0nd2lkZ2V0Jz5cbiAgICAgICAgPGgzPkNoZWNrIHlvdXIgY3JlZGl0IGNhcmQgbnVtYmVyPC9oMz5cbiAgICAgICAgPGRpdiBjbGFzcz0nZm9ybS1jb250YWluZXInPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPSdjYXJkcy1jb250YWluZXInPjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxufVxuIiwiaW1wb3J0IENhcmRzRXhhbXBsZXNUYWJsZSBmcm9tICcuLi9jYXJkcy1leGFtcGxlcy10YWJsZS9DYXJkc0V4YW1wbGVzVGFibGUnO1xuaW1wb3J0IFdpZGdldCBmcm9tICcuLi93aWRnZXQvV2lkZ2V0JztcbmltcG9ydCAnLi92YWxpZGF0b3IuY3NzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XG4gICAgaWYgKCEoY29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvbnRhaW5lciBpcyBub3QgSFRNTEVsZW1lbnQnKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgfVxuXG4gIGJpbmRUb0RPTSgpIHtcbiAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSBWYWxpZGF0b3IubWFya1VwO1xuICAgIHRoaXMud2lkZ2V0Q29udGFpbmVyID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcihWYWxpZGF0b3Iud2lkZ2V0U2VsZWN0b3IpO1xuICAgIHRoaXMudGFibGVDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFZhbGlkYXRvci50YWJsZVNlbGVjdG9yKTtcblxuICAgIGNvbnN0IHdpZGdldCA9IG5ldyBXaWRnZXQodGhpcy53aWRnZXRDb250YWluZXIpO1xuICAgIHdpZGdldC5iaW5kVG9ET00oKTtcblxuICAgIGNvbnN0IHRhYmxlID0gbmV3IENhcmRzRXhhbXBsZXNUYWJsZSh0aGlzLnRhYmxlQ29udGFpbmVyKTtcbiAgICB0YWJsZS5iaW5kVG9ET00oKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgbWFya1VwKCkge1xuICAgIHJldHVybiBgXG4gICAgICA8ZGl2IGNsYXNzPVwiaGVhZG1hc3RcIj5cbiAgICAgICAgPGgyPlZhbGlkYXRlIENyZWRpdCBDYXJkIE51bWJlcnM8L2gyPlxuICAgICAgICA8aDM+Q2hlY2sgYSBjcmVkaXQgY2FyZCBudW1iZXIgd2l0aCBvdXIgb25saW5lIGNoZWNrZXIhPC9oMz5cbiAgICAgICAgPGRpdiBjbGFzcz1cIndpZGdldC1jb250YWluZXJcIj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRhYmxlLWNvbnRhaW5lclwiPjwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgd2lkZ2V0U2VsZWN0b3IoKSB7XG4gICAgcmV0dXJuICcud2lkZ2V0LWNvbnRhaW5lcic7XG4gIH1cblxuICBzdGF0aWMgZ2V0IHRhYmxlU2VsZWN0b3IoKSB7XG4gICAgcmV0dXJuICcudGFibGUtY29udGFpbmVyJztcbiAgfVxufVxuIiwiaW1wb3J0IFZhbGlkYXRvciBmcm9tICcuL2NvbXBvbmVudHMvdmFsaWRhdG9yL1ZhbGlkYXRvcic7XG5cbi8qIGVzbGludC1kaXNhYmxlICovXG5jb25zb2xlLmxvZyhcIml0IHdvcmtzIVwiKTtcblxuY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXZhbGlkYXRvci1jb250YWluZXJcIik7XG5jb25zdCB2YWxpZGF0b3IgPSBuZXcgVmFsaWRhdG9yKGNvbnRhaW5lcik7XG52YWxpZGF0b3IuYmluZFRvRE9NKCk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImxlbmd0aCIsIkVycm9yIiwicmVwbGFjZSIsInAiLCJDYXJkRXhhbXBsZXNUYWJsZSIsImNvbnN0cnVjdG9yIiwiY29udGFpbmVyIiwiSFRNTEVsZW1lbnQiLCJjYXJkcyIsInR5cGUiLCJudW1iZXIiLCJiaW5kVG9ET00iLCJpbm5lckhUTUwiLCJtYXJrdXAiLCJtYXAiLCJjYXJkIiwiam9pbiIsIkNhcmRzTGlzdCIsImNsYXNzIiwidGl0bGUiLCJ1cmwiLCJ2aXNhRWxlY3Ryb24iLCJNYXN0ZXJDYXJkIiwiQW1leENhcmQiLCJEaXNjb3ZlckNhcmQiLCJNaXJDYXJkIiwiRGluZXJzQ2x1YkNhcmQiLCJDaGVja0Zvcm0iLCJvblN1Ym1pdCIsImJpbmQiLCJvbklucHV0Q2hhbmdlIiwic2VsZWN0b3IiLCJtZXNzYWdlU2VsZWN0b3IiLCJzdWJtaXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJlbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIm1lc3NhZ2UiLCJzdWJtaXQiLCJpbnB1dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJwcmV2ZW50RGVmYXVsdCIsImlzVmFsaWRDYXJkIiwidmFsdWUiLCJudW0iLCJuQ2hlY2siLCJiRXZlbiIsIm4iLCJuRGlnaXQiLCJwYXJzZUludCIsImNoYXJBdCIsImlzVmFsaWQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJwYXltZW50U3lzdGVtIiwicGF5U3lzdGVtIiwiYSIsIlN0cmluZyIsInRlc3QiLCJmaW5kUGF5bWVudFN5c3RlbSIsImFkZCIsInNob3dNZXNzYWdlIiwicmVtb3ZlIiwiYWN0aXZlQ2FyZCIsImhpZGVNZXNzYWdlIiwiV2lkZ2V0IiwiZm9ybUNvbnRhaW5lciIsImZvcm1TZWxlY3RvciIsImNhcmRzQ29udGFpbmVyIiwiY2FyZHNTZWxlY3RvciIsIlZhbGlkYXRvciIsIm1hcmtVcCIsIndpZGdldENvbnRhaW5lciIsIndpZGdldFNlbGVjdG9yIiwidGFibGVDb250YWluZXIiLCJ0YWJsZVNlbGVjdG9yIiwiQ2FyZHNFeGFtcGxlc1RhYmxlIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=